{% extends 'base.html' %}
{% block title %}Relatório por Colaborador{% endblock %}
{% block content %}
<h2>Relatório por Colaborador</h2>

<form method="get">
    <label for="colaborador">Selecione o colaborador:</label>
    <select name="colaborador" id="colaborador">
        <option value="">Todos</option>
        {% for c in colaboradores %}
            <option value="{{ c.id }}" {% if c.id|stringformat:"s" == colaborador_id %}selected{% endif %}>
                {{ c.nome }}
            </option>
        {% endfor %}
    </select>
    <button type="submit">Filtrar</button>
</form>

<table>
    <tr>
        <th>Colaborador</th>
        <th>EPI</th>
        <th>Qtd</th>
        <th>Data</th>
        <th>Previsão Devolução</th>
        <th>Devolvido</th>
    </tr>
    {% for e in emprestimos %}
    <tr>
        <td>{{ e.colaborador.nome }}</td>
        <td>{{ e.epi.nome }}</td>
        <td>{{ e.quantidade }}</td>
        <td>{{ e.data_emprestimo|date:"d/m/Y" }}</td>
        <td>{{ e.previsao_devolucao|date:"d/m/Y" }}</td>
        <td>{{ e.devolvido|yesno:"Sim,Não" }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6">Nenhum empréstimo encontrado.</td></tr>
    {% endfor %}
</table>
{% endblock %}
